"""
        You are an assistant designed to break down a complex data science or geospatial analysis task 
        into smaller, focused sub-queries. Each sub-query must target a specific technical domain 
        so that relevant documentation, examples, or code can be retrieved using a vector database.

        Given the user query, return 3 clearly separated sub-queries:

        1. HDF5 Dataset Access:
        Focus only on `h5py` such as accessing file with extensions H5, h5, HE5, he5, HDF5, or hdf5, 
        accessing datasets or attributes, dataset paths (like `/Grid/cloudWater`), and metadata.

        2. NumPy-based Data Preprocessing:
        Focus only on how to handle `_FillValue`, apply masks using NumPy (`np.where`, `np.ma.masked_where`), and compute or filter data using `min`, `max`, or 
        other preprocessing logic.

        3. Map Plotting and Visualization:
        Focus only on how to use `matplotlib`, `mpl_toolkits.basemap`, or `cartopy` to visualize geospatial data, configure projections, draw coastlines, 
        meridians, parallels, and apply colorbars or titles.

        
        User Query:
            Write a python script to draw the phase diagram of water with the provided data, named "84_h5_data.h5":
1. Prepare the Axes:
- Create a horizontal axis for temperature, marking one scale in Celsius (0째C to 100째C) and another in Kelvin (273.15 K to 647.396 K). 
    These scales should be aligned so that each temperature in Celsius matches its corresponding value in Kelvin.
- Create a vertical axis for pressure, marking one scale in Pascals (from 611.657 Pa to 22.064 MPa, possibly using a logarithmic scale for better visualization) 
    and another in bars and millibars. Align these scales so that, for example, 100 kPa corresponds with 1 bar.
- Set X1 to x1 - 273.15 to convert Kelvin to Celsius for the top X-axis. Set Y1 to y1/100000 to convert Pascals to bars for the right Y-axis. 
    Adjust the right Y-axis to have a Log10 scale type.
2. Plot the Phase Boundaries:
- Utilize datasets `Pressure(Gas)` and `Pressure(Liquid)` from your data to plot the boundary line between the solid, liquid, and gas phases, curving from the triple point to the critical point.
- Use datasets `Temperature(K)` and `Temperature(K).1` to plot the boundary between solid and liquid phases, which typically curves less dramatically than the solid-liquid-gas line.
3. Highlight Special Points:
- Mark the triple point at 273.16 K and 611.657 Pa, where solid, liquid, and gas coexist.
- Indicate the critical point at 647.396 K and 22.064 MPa, where the distinction between liquid and gas phases ends.
4. Insert Red Lines:
- Draw a vertical red line at 0째C and 273.15 K to represent the freezing point at 1 atm, intersecting the solid-liquid boundary.
- Add another vertical red line at 100째C and 373.15 K for the boiling point at 1 atm, intersecting the liquid-gas boundary.
5. Label and Color-Code:
- Clearly label each axis with its respective units.
- Color the different regions of the diagram to represent the solid (blue), liquid (green), and gas (yellow) phases.
- Annotate the diagram with the special points and the red lines, including their corresponding temperature and pressure values.
6. Grid and Scale:
- It may be helpful to include a grid to accurately read off pressures and temperatures at various points on the diagram.
- Ensure that the scale is logarithmic for pressure if you are spanning wide ranges, as phase diagrams often do.

        ---
        Note: return only the the response of sub-queries only based on the below format, not explanation, not python code, and node additional text needed
        Return format:

        HDF5 Dataset Access Sub-query:
        <generated sub-query>

        NumPy Data Preprocessing Sub-query:
        <generated sub-query>

        Plotting and Visualization Sub-query:
        <generated sub-query>
        """

<think>
Alright, I need to break down the user's query into three specific sub-queries as per their instructions. Let me go through each part step by step.

First, the user wants a Python script to draw a phase diagram of water using data from an HDF5 file named "84_h5_data.h5". The task involves several steps: preparing axes with dual scales for temperature and pressure, plotting phase boundaries, highlighting special points, adding red lines, labeling, color-coding, and setting up the grid and scale.

Starting with the HDF5 Dataset Access sub-query. I need to focus on accessing specific datasets from the HDF5 file using h5py. The user mentions datasets like `Pressure(Gas)`, `Pressure(Liquid)`, `Temperature(K)`, and `Temperature(K).1`. So, the sub-query should ask how to access these datasets by their paths and retrieve any relevant metadata.

Next, for the NumPy-based Data Preprocessing sub-query. The task involves handling data from the HDF5 file. I need to consider `_FillValue` if present, apply masks using np.where or np.ma.masked_where, and compute min/max values as needed. For example, preparing temperature in both Celsius and Kelvin, pressure in Pascals and bars, and ensuring proper scaling for logarithmic plots.

Lastly, the Plotting and Visualization sub-query should cover how to use matplotlib, basemap, or cartopy to create the phase diagram. This includes setting up dual axes with aligned scales, adding grid lines, color-coding regions, plotting boundaries, marking special points, and annotating everything properly.

I need to ensure each sub-query is clear and focused on its respective domain without overlapping into other areas. Let me structure them accordingly.
</think>

HDF5 Dataset Access Sub-query:
How to access the datasets `Pressure(Gas)`, `Pressure(Liquid)`, `Temperature(K)`, and `Temperature(K).1` from the HDF5 file "84_h5_data.h5" using h5py, including their metadata and dataset paths.

NumPy Data Preprocessing Sub-query:
How to handle _FillValue in NumPy arrays, apply masks using np.where or np.ma.masked_where for temperature and pressure data, and compute min/max values for preprocessing phase diagram data.

Plotting and Visualization Sub-query:
How to use matplotlib to create a phase diagram with dual axes (Celsius/Kelvin and Pascals/bars), plot boundaries between solid, liquid, and gas phases, add special points (triple and critical points), draw vertical red lines at freezing and boiling points, color-code regions, and include annotations and gridlines.